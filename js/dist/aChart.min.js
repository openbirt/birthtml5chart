/*! birthtml5chart 02-09-2014 */
!function(){function a(){return this.init.apply(this,arguments)}function b(a){if("object"==typeof a){for(var c in a)if(a.hasOwnProperty(c)){var d=b(c);d!==c&&(a[d]=a[c],a[c]=null,delete a[c])}return a}return a?a.replace(/([A-Z])/g,function(a,b){return"-"+b.toLowerCase()}):a}function c(a,b){var c=typeof a;return"string"===c&&a.indexOf("%")>=0?parseInt(a)*b/100:a}({mode:"horizontal",width:600,height:400,padding:{top:20,right:20,bottom:20,left:20},fillStyle:{fill:"#FFFFCC",fillOpacity:1,stroke:"black",strokeWidth:1,strokeOpacity:.5},animation:{enabled:!0,mode:"oneByOne",ease:null,duration:1e3},plot:{fill:"#FFFF99",fillOpacity:1,stroke:"red",strokeWidth:1,strokeOpacity:.5},xAxis:{type:null,line:{fill:"none",stroke:"green",strokeWidth:1,strokeOpacity:.5},tick:{number:10,fillStyle:{stroke:"green",strokeWidth:2,strokeOpacity:.5}},label:{enabled:!0,fillStyle:{fill:""},fontStyle:{},format:null}},yAxis:{type:null,line:{stroke:"black",strokeWidth:1,strokeOpacity:.5},tick:{number:10,fillStyle:{stroke:"black",strokeWidth:1,strokeOpacity:.5}},label:{enabled:!0,fillStyle:{fill:""},fontStyle:{},format:null}},series:[{enabled:!0,data:[100,200,150,170],label:{enabled:!0,fontStyle:{"font-family":'"Helvetica Neue", Helvetica, Arial, sans-serif',"font-size":"24px","font-weight":"bold"},animation:{enabled:!0,mode:"oneByOne",ease:null,duration:1e3}},colors:d3.scale.category20().range(),fillStyle:{fill:"#CCCCCC",fillOpacity:1,stroke:"#999999",strokeWidth:2,strokeOpacity:.5},width:"50%"},{enabled:!0,data:[80,100,110,90],label:{enabled:!0,format:function(a){return a.value},fontStyle:{"font-family":'"Helvetica Neue", Helvetica, Arial, sans-serif',"font-size":"24px","font-weight":"bold"}},colors:d3.scale.category20().range(),width:"50%"}],categories:{type:null,data:["a","b","c","d"]}});a.prototype={opts:null,init:function(a){this.opts=a},render:function(){var a,c,d=this.opts,e={},f={};e.barChart=this,e.opts=d,e.remainedBox=f,e.isVertical="vertical"===d.mode,d.width||(d.width=$(container).width()),d.height||(d.height=$(container).height()),f.x=0,f.y=0,f.w=d.width,f.h=d.height,this.svg=d3.select(container).append("svg"),a=this.svg.attr("width",d.width).attr("height",d.height).append("g").attr("class","chart barChart"),c=a.append("g").attr("class","chartArea"),d.padding&&(f.x+=d.padding.left||0,f.y+=d.padding.top||0,f.w-=(d.padding.left||0)+(d.padding.right||0),f.h-=(d.padding.top||0)+(d.padding.bottom||0)),this.adaptSeries(e),this.adaptAxis(e);var g=d3.scale.linear().range(e.isVertical?[f.h,0]:[0,f.w]).domain([0,e.seriesValueExtent[1]]),h=d3.svg.axis().scale(g).orient(e.isVertical?"left":"bottom").ticks(d.yAxis.tick.number||10);d.yAxis.label.format&&h.tickFormat(d.yAxis.label.format);var i=c.append("g").attr("class","yAxis").attr("transform","translate("+f.x+","+f.y+")").call(h);i.selectAll("text").style(b(d.yAxis.label.fillStyle)),i.select("path").style(b(d.yAxis.line)),i.selectAll("line").style(b(d.yAxis.tick.fillStyle));var j=i.node().getBBox(),k=d3.scale.ordinal().rangeBands(e.isVertical?[0,f.w]:[f.h,0]).domain(d.categories.data),l=d3.svg.axis().scale(k).orient(e.isVertical?"bottom":"left");d.xAxis.label.format&&l.tickFormat(d.xAxis.label.format);var m=c.append("g").attr("class","xAxis").attr("transform","translate(0,"+(f.y+f.h)+")").call(l);m.selectAll("text").style(b(d.xAxis.label.fillStyle)),m.select("path").style(b(d.xAxis.line)),m.selectAll("line").style(b(d.xAxis.tick.fillStyle));var n=m.node().getBBox(),o=m.select(".tick").node().getBBox(),p=i.select(".tick").node().getBBox();e.isVertical?(k.rangeBands([0,f.w-p.width]),l.scale(k),m.attr("transform","translate("+(f.x+j.width)+", "+(f.y+f.h-n.height)+")").call(l),g.range([f.h-o.height,0]),h.scale(g),i.attr("transform","translate("+(f.x+j.width)+","+f.y+")").call(h)):(g.range([0,f.w-n.width]),h.scale(g),i.attr("transform","translate("+(f.x+n.width)+","+(f.y+f.h-j.height)+")").call(h),k.rangeBands([f.h-j.height,0]),l.scale(k),m.attr("transform","translate("+(f.x+n.width)+", "+f.y+")").call(l)),e.isVertical?(e.remainedBox.x+=j.width,e.remainedBox.w-=j.width,e.remainedBox.h-=n.height):(e.remainedBox.x+=n.width,e.remainedBox.w-=n.width,e.remainedBox.h-=j.height),chartPlot=c.append("g").attr("class","plot").style(b(d.plot.fillStyle)).attr("transform","translate("+f.x+","+f.y+")"),e.x=k,e.y=g,e.xAxis=l,e.yAxis=h,e.barChart=a,e.chartArea=c,e.chartPlot=chartPlot,e.xAxisBlock=m,e.yAxisBlock=i,e.renderSeriesCallback=this.renderSeries,e._this=this,this.onRenderSeries(e)},onRenderSeries:function(a){var b=a.opts;if("oneByOne"===b.animation.mode)series=b.series[0],a.seriesIndex=0,a.renderSeriesCallback.call(a._this,series,a);else for(var c=0;c<b.series.length;c++)series=b.series[c],a.seriesIndex=c,a.renderSeriesCallback.call(a._this,series,a)},renderSeries:function(a,f){var g,h,i,j,k,l=f.x,m=f.y,n=f.remainedBox,o=f.x.rangeBand();a.enabled!==!1&&(k=c(a.width||o,o),g=chartPlot.append("g").attr("class","series "+f.seriesIndex),h=g.selectAll(".bar").data(a.data).enter(),i=h.append("rect").attr("class","bar").each(function(a){d3.select(this).style(b(a.fillStyle))}).attr("x",function(a){return f.isVertical?l(a.category)+(o-k)/2:0}).attr("width",f.isVertical?c(a.width||o,o):0).attr("y",f.isVertical?n.h:function(a){return l(a.category)+(o-k)/2}).attr("height",f.isVertical?0:k).transition().duration(a.animation.enabled!==!1?a.animation.duration||d:d).ease(a.animation.enabled!==!1?a.animation.ease||e:e).attr("y",f.isVertical?function(a){return m(a.value)}:function(a){return l(a.category)+(o-k)/2}).attr("width",f.isVertical?c(a.width||o,o):function(a){return m(a.value)}).attr("height",f.isVertical?function(a){return n.h-m(a.value)}:k).each("end",function(b,c){c+1<=a.data.length&&f.opts.animation.enabled!==!1&&"oneByOne"===f.opts.animation.mode&&(f.seriesIndex++,f.seriesIndex<f.opts.series.length&&f.renderSeriesCallback.call(f._this,f.opts.series[f.seriesIndex],f))}),j=h.append("text").attr("class","label").text(function(a){return a.label.format!==!1?a.label.format?a.label.format.call(this,a,f):a.value:""}).each(function(a){var c=d3.select(this);c.style(b(a.label.fillStyle)).style(b(a.label.fontStyle)).attr("text-anchor",a.label.align).attr("x",f.isVertical?l(a.category)+o/2:0).attr("y",f.isVertical?f.remainedBox.h:l(a.category)+o/2).transition().duration(a.label.animation.enabled!==!1?a.label.animation.duration||d:d).ease(a.label.animation.enabled!==!1?a.label.animation.ease||e:e).attr("x",f.isVertical?l(a.category)+o/2:m(a.value)).attr("y",f.isVertical?m(a.value):l(a.category)+o/2).attr("dy",f.isVertical?"0em":".5em")}))},adaptAxis:function(a){var b=a.opts,c=b.xAxis,d=b.yAxis;c.line=c.line||{},c.line.fill=c.line.fill||"none",d.line=d.line||{},d.line.fill=d.line.fill||"none"},adaptSeries:function(a){var b,c,d,e,f,g,h=a.opts.series,i=[0,0],j=a.opts.categories.data;for(b=0;b<h.length;b++)for(f=h[b],f.label.align=f.label.align||(a.isVertical?"middle":"end"),f.animation=$.extend({},a.opts.animation||{},f.animation||{}),c=0;c<f.data.length;c++)d=f.data[c],g=typeof d,"object"!==g?(e={},e.value=d):e=f.data[c],e.category=j[c],e.fillStyle=$.extend({},f.fillStyle,e.fillStyle),e.fillStyle.fill=e.fillStyle.fill||(f.colors||d3.scale.category20().range())[c%f.data.length],e.label=$.extend({},f.label),e.label.animation=$.extend({},f.animation,e.label.animation),f.data[c]=e,i=d3.extent(i.concat(d3.extent([e.value])));a.seriesValueExtent=i}},aCharts=window.aCharts||{},aCharts.Bar=a,window.aCharts=window.aCharts||aCharts;var b=aCharts.util.toCssStyle,d=aCharts.DEFAULT_DURATION,e=aCharts.DEFAULT_EASE}();