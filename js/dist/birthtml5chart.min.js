/*! birthtml5chart 05-10-2014 */
!function(){function a(a){return"number"==typeof a}function b(a){return"stirng"==typeof a}function c(a){return"funciton"==typeof a}function d(a){return"object"==typeof a}function e(a){if(!a)return!0;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function f(a){return a*Math.PI/180}function g(a){return 180*a/Math.PI}function h(){var a=document.createElement("div");a.setAttribute("id","testdiv"),a.style.height="1in",a.style.left="-100%",a.style.position="absolute",a.style.top="-100%",a.style.width="1in";var b=document.getElementsByTagName("body")[0];b.appendChild(a);var c=document.getElementById("testdiv").offsetWidth;return b.removeChild(a),c}function i(a,b,c){if(!b)return a;var d,e,f,g=Y?Y:Y=h(),i=null;return"number"==typeof a?(d=a,f="px"):(d=parseFloat(a),f=a.indexOf("pt")>0?"pt":a.indexOf("in")>0?"in":a.indexOf("mm")>0?"mm":a.indexOf("cm")>0?"cm":"px"),e=d,"pt"===f?e=g*d/72:"in"===f?e=d*g:"mm"===f?e=g*d/25.4:"cm"===f&&(e=g*d/2.54),"pt"===b?(e=72*e/g,i="pt"):"in"===b?(e/=g,i="in"):"mm"===b?(e=25.4*e/g,i="mm"):"cm"===b?(e=2.54*e/g,i="cm"):"px"===b&&(e=e,i="px"),c===!0?e:e+i}function j(a,b){return i(a,"px",b)}function k(a){if(null===a||"object"!=typeof a)return a;var b=new a.constructor;for(var c in a)a.hasOwnProperty(c)&&(b[c]=k(a[c]));return b}function l(a){if(null===a||"object"!=typeof a)return a;var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=l(a[c]));return b}function m(a,b){if(!b)return a;if(!a)return k(b);for(var c in b)b.hasOwnProperty(c)&&(a[c]=null===b[c]||"object"!=typeof b[c]?b[c]:m(a[c],b[c]));return a}function n(a,b){var c=null;a||(a={});for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function o(a,b,c,d){function e(){return this.fInit&&this.fInit.apply(this,arguments),this}var f=b?b:e;return f.prototype=c?new c:{},n(f.prototype,d),f.prototype.__super=c?c.prototype:null,f.prototype.__className=a,f}function p(a,b,c){var d=b,e=c,f=!0;"object"!=typeof b||e||(d=b.degree,e=b.mode,f=b.enabled!==!1);var g,h,i,j,k,l;return f&&"number"==typeof d&&(g=a.getBBox(),"auto"===e?k="":(h="start"===e?g.x:"end"===e?g.x+g.width:g.x+g.width/2,i=g.y+g.height/2,k=" "+h+" "+i),l="rotate("+d+k+")",j=a.getAttribute("transform"),j?j.match(Z)?j=j.replace(Z,l):j+=" "+l:j=l,a.setAttribute("transform",j)),a}function q(a,b,c){var d=b,e=c,f=!0;return"object"!=typeof b||e||(d=b.degree,e=b.mode,f=b.enabled!==!1),a.attr("transform",function(){var a,b,c,g,h,i=null;return f&&"number"==typeof d&&(a=this.getBBox(),"auto"===e?g="":(b="start"===e?a.x:"end"===e?a.x+a.width:a.x+a.width/2,c=a.y+a.height/2,g=" "+b+","+c),h="rotate("+d+g+")",i=this.getAttribute("transform"),i?i.match(Z)?i=i.replace(Z,h):i+=" "+h:i=h),i})}function r(a,b,c,d){function e(a,b,c,e){return"function"==typeof a?a(b,c,e,d):a}if(1===arguments.length){var f=[];return a.each(function(a,b,c){var d,e,g=this.getAttribute("transform");g&&g.indexOf("translate")>=0&&(g=g.match($),g&&g.length&&(g=g[0].match(/([0-9\.\-]+)/g),g&&g.length&&(d=parseFloat(g[0]),e=g[1]?parseFloat(g[1]):0,f.push({x:d,y:e})))),f[c]||f.push({x:0,y:0})}),f}return a.attr("transform",function(a,d,f){var g="translate("+e(b,a,d,f)+","+e(c,a,d,f)+")",h=this.getAttribute("transform");return h?h.match($)?h=h.replace($,g):h+=" "+g:h=g,h})}function s(a){return a instanceof Array?a:[a]}function t(a){return"."+a.replace(" ",".")}function u(a){if("function"==typeof a)return a;if("object"==typeof a){for(var b in a)if(a.hasOwnProperty(b)){var c=u(b);c!==b&&(a[c]=a[b],a[b]=null,delete a[b])}return a}return a?a.replace(/([A-Z])/g,function(a,b){return"-"+b.toLowerCase()}):{}}function v(a,b){b.x&&a.attr("x",b.x),b.y&&a.attr("y",b.y),b.dx&&a.attr("dx",b.dx),b.dy&&a.attr("dy",b.dy),b.width&&a.attr("width",b.width),b.heigth&&a.attr("height",b.height)}function w(a,b){var c,d=typeof b;return"string"===d||"function"===d?(c={},c[a]=b,c):"object"===d?u(b):{}}function x(a){return a?a.strokeWidth||a["stroke-width"]||a.width||0:0}function y(a,b){if("object"==typeof a)for(var c in a)a.hasOwnProperty(c)&&("roundCorner"===c?(a.rx=a.rx||a.roundCorner,a.ry=a.ry||a.roundCorner):"dashStyle"===c?a[c]=C.call(this,c,a[c],x(a),b):("stroke"===c||"fill"===c)&&(a[c]=z.call(this,a[c],b)));return w.call(this,"border",a)}function z(a,b){var c=null,d=null,e=null,f=null,g=0;if("function"==typeof a)return function(c){var d=b?d3.merge(arguments,[b]):arguments;return a.apply(c,d)};if("object"!=typeof a)return a;if("image"===a.type)return c=this.getBBox(),d=this.d3Sel.append("image").datum(a),d.attr({x:0,y:0,width:c.width,height:c.height,"xlink:href":a.parameters&&a.parameters[0]}),a.indexOf("url")>=0?a:"#url("+a+")";if("linearGradient"===a.type||"radialGradient"===a.type){var h=b.fDefs();for(e=A(a.type),f=h.append(a.type).attr("id",e).attr(B(a)),g=0;g<a.stops.length;g++)f.append("stop").attr(u({offset:a.stops[g].offset||"0%",stopColor:a.stops[g].stopColor||this.options&&this.options.fill||"white",stopOpacity:a.stops[g].stopOpacity||1}));return"url(#"+e+")"}}function A(a){return GLOBAL.prefix+"-"+(a?a+"-":"")+ab++ +"-"+Math.random().toString(2).slice(2)}function B(a){var b=a.parameters,c=null;return"linearGradient"===a.type?(b=b||["0%","0%","100%","100%"],"string"==typeof b&&(c=b.split(","),b=[],b[0]=_[c[0]][0],b[1]=_[c[0]][1],b[2]=_[c[1]][0],b[3]=_[c[1]][1]),{x1:b[0],y1:b[1],x2:b[2],y2:b[3]}):"radialGradient"===a.type?{cx:b[0],cy:b[1],r:b[2],fx:b[3],fy:b[4]}:void 0}function C(a,b,c){var d,e=a;if("function"==typeof e)return function(){var a=c?d3.merge(arguments,[c]):arguments;return e.apply(this,a)};if(e=e&&e.toLowerCase(),"solid"===e)e="none";else if(e){for(e=e.replace(/(shortdashdotdot)/g,"3,1,1,1,1,1,").replace(/(shortdashdot)/g,"3,1,1,1").replace(/(shortdot)/g,"1,1,").replace(/(shortdash)/g,"3,1,").replace(/(longdash)/g,"8,3,").replace(/(dot)/g,"1,3,").replace(/(dash)/g,"4,3,").replace(/,$/,"").split(","),d=e.length;d--;)e[d]=parseInt(e[d])*b;e=e.join(",")}return e}function D(a,b){if("object"==typeof a)for(var c in a)a.hasOwnProperty(c)&&("stroke"===c||"fill"===c)&&(a[c]=z.call(this,a[c],b),a[c+"Opacity"]=void 0===a[c+"Opacity"]?1:a[c+"Opacity"]);return w.call(this,"font",a)}function E(a){return w.call(this,"fill",a)}function F(a){return w.call(this,"fill",a)}function G(a){if("string"==typeof a){var b=a.split(/ /g);switch(b.length){case 1:return{top:j(b[0],!0),right:j(b[0],!0),bottom:j(b[0],!0),left:j(b[0],!0)};case 2:return{top:j(b[0],!0),right:j(b[1],!0),bottom:j(b[0],!0),left:j(b[1],!0)};case 3:return{top:j(b[0],!0),right:j(b[1],!0),bottom:j(b[2],!0),left:j(b[1],!0)};case 4:return{top:j(b[0],!0),right:j(b[1],!0),bottom:j(b[2],!0),left:j(b[3],!0)}}return{top:0,right:0,bottom:0,left:0}}var c=m({top:0,right:0,bottom:0,left:0},a);return c}function H(a){return G(a)}function I(){return{x:0,y:0,width:0,height:0}}function J(a,b){var c=typeof b;return b?"function"===c?b.call(this,a):"string"===c?d3.format(b).call(this,a):void 0:a}function K(a){return"center"===a?"middle":"right"===a?"end":"start"}function L(a){return d3.scale[a]&&"function"==typeof d3.scale[a]?d3.scale[a]():d3.scale.ordinal()}function M(a){var b=a[0],c=a[a.length-1];return c>b?[b,c]:[c,b]}function N(a){return a.rangeExtent?a.rangeExtent():M(a.range())}function O(a,b,c){return"top"===c||"bottom"===c?["cross"===a.position?-b:0,"above"===a.position?-b:a.position||"top"!==c?b:-b]:["cross"===a.position?-b:0,"left"===a.position?-b:a.position||"left"!==c?b:-b]}function P(a,b){Q(a,b),S(a,b)}function Q(a,b){a.label&&(a.label.position=R(b,a.label.position)),a.major.position=R(b,a.major.position),a.minor&&(a.minor.position=R(b,a.minor.position))}function R(a,b){return"cross"===b?b:"top"===a?"left"===b?"below":"right"===b?"top":b:"bottom"===a?"right"===b?"above":"left"===b?"below":b:"left"===a?"above"===b?"right":"below"===b?"left":b:"right"===a?"below"===b?"left":"above"===b?"right":b:b}function S(a,b){var c=a.label;c&&("top"===b||"bottom"===b?(c.align="auto"===c.align?"center":c.align||"center",c.verticalAlign="auto"===c.verticalAlign?"below"===c.position?"top":"bottom":c.verticalAlign||("below"===c.position?"top":"bottom")):(c.align="auto"===c.align?"left"===c.position?"right":"left":c.align||("left"===c.position?"right":"left"),c.verticalAlign="auto"===c.verticalAlign?"center":c.verticalAlign||"center"))}function T(a,b,c){var d={dx:0,dy:0},e=a.label,f=a.major,g=a.minor,h=R(c,f.position),i=R(c,g.position),j=f.enabled?f.size:0,k=g.enabled?g.size:0,l=e.gap,m=e.align,n=0;return"same"===e.position?e.position=h:"opposite"===e.position&&(e.position="cross"===h?"top"===c?"below":"bottom"===c?"above":"left"===c?"right":"left":"below"===h?"above":"above"===h?"below":"left"===h?"right":"left"),"cross"===e.position&&(e.position="top"===c?"above":"bottom"===c?"below":"left"===c?"left":"right"),"bottom"===c||"top"===c?"above"===e.position?(n="below"!==h?j:"below"!==i?k:0,d.dy=-(n+l+b.height)):(n="above"!==h?j:"above"!==i?k:0,d.dy=n+l):("left"===c||"right"===c)&&("left"===e.position?(n="right"!==h?j:"right"!==i?k:0,d.dx="center"===m?-(n+l):"left"===m?-(n+l+b.width):-(n+l),d.dy=-b.height/2):(n="left"!==h?j:"left"!==i?k:0,d.dx="right"===m?n+l+b.width:n+l,d.dy=-b.height/2)),d}function U(a,b){return"top"===a||"bottom"===a?"M"+b[0]+",0 H"+b[1]:"left"===a||"right"===a?"M"+b[0]+",0 V"+b[1]:void 0}function V(a,b){a.attr("transform",function(a){var c=r(d3.select(this));return"translate("+b(a)+","+c[0].y+"0)"})}function W(a,b){a.attr("transform",function(a){var c=r(d3.select(this));return"translate("+c[0].x+","+b(a)+")"})}function X(a,b,c){var d=[];if(c&&b.length>1){for(var e,f,g=M(a.domain()),h=-1,i=b.length,j=(b[1]-b[0])/++c;++h<i;)for(e=c;--e>0;)(f=+b[h]-e*j)>=g[0]&&d.push(f);for(--h,e=0;++e<c&&(f=+b[h]+e*j)<g[1];)d.push(f)}return d}d3.selection.prototype.bbox=function(a){if(!a&&this._bbox)return this._bbox;this._bbox={x:0,y:0,width:0,height:0};for(var b=0,c=this.length;c>b;b++)for(var d=this[b],e=0,f=d.length;f>e;e++){var g=d[e];if(g&&("g"===g.nodeName||"text"===g.nodeName)){var h=g._bbox;(!h||a)&&(h=h||g.getBBox()),this._bbox.x=h.x<this._bbox.x?h.x:this._bbox.x,this._bbox.y=h.y<this._bbox.y?h.y:this._bbox.y,this._bbox.width=h.x+h.width>this._bbox.x+this._bbox.width?h.width:this._bbox.width,this._bbox.height=h.y+h.height>this._bbox.y+this._bbox.height?h.height:this._bbox.height}}return this._bbox},d3.transition.prototype.bbox=d3.selection.prototype.bbox,d3.selection.prototype.opts=function(){return arguments.length?this.property("__opts__",value):this.property("__opts__")};var Y,Z=/rotate\(.*?\)/g,$=/translate\(.*?\)/g,_={L:["0%","50%"],R:["100%","50%"],T:["50%","0%"],B:["50%","100%"],LT:["0%","0%"],TL:["0%","0%"],LB:["0%","100%"],BL:["0%","100%"],RT:["100%","0%"],TR:["100%","0%"],RB:["100%","100%"],BR:["100%","100%"]},ab=0,bb={lazyRender:!0,prefix:"d3charts"},cb=function(){},db=function(){},eb=function(){},fb=o("Context",null,Object,{prefix:null,lazyRender:null,svgNode:null,fInit:function(a){this.prefix=bb.prefix,this.lazyRender=bb.lazyRender,this.svgNode=a},fSvgSel:function(){return arguments.length?(this.svgSel=arugments[0],this):this.svgSel},fDefs:function(){return arguments.length?(this.defs=arguments[0],this):this.defs?this.defs:this.defs=this.svgSel.append("defs")}}),gb=o("RenderCallback",null,null,{fBeforeRendering:function(){},fAfterRendering:function(){}}),cb=o("Element",null,gb,{__className:null,__super:null,context:null,parent:null,options:null,d3Sel:null,isRendered:!1,fInit:function(a,b,c){this.context=a,this.parent=b,this.options=c||{}},fOptions:function(){return arguments.length?(this.options=arguments[0],this.fApplyChange(this.fOptions)):this.options},fApplyChange:function(){return this.context.lazyRender||this.fRedraw(),this},fRender:function(a){return this.d3Sel=a,this.fBeforeRendering.apply(this,arguments),this._fRender.apply(this,arguments),this.isRendered=!0,this.fAfterRendering.apply(this,arguments),this},_fRender:function(){return this},fRedraw:function(){return this.d3Sel&&this.fDestory()&&this.fRender(this.d3Sel),this},fAttr:function(){var a=null;if(this.d3Sel)if(1===arguments.length){if(a=typeof arguments[0],"string"===a)return this.d3Sel.attr(arguments[0]);"object"===a&&this.d3Sel.attr.apply(this,arguments)}else arguments.length&&this.d3Sel.attr.apply(this,arguments);return this},fClassNames:function(){return this.options.id?this.options.id+" "+this.__className:this.__className},fBBox:function(){return this.d3Sel?l(this.d3Sel.bbox()):{}},fDestory:function(){return this.d3Sel?(this.d3Sel.selectAll("*").remove(),this.isRendered=!1,!0):!1}}),hb=o("Text",null,cb,{_fRender:function(a){var b=this.options,c=this.fClassNames(),d=a.selectAll(t(c)).data(s(b.data));return b.enabled===!1?void d.remove():(d.exit().remove(),d.enter().append("text").attr("class",c),void d.each(function(a){var c=d3.select(this),d=a.split("\n");if(d.length<=1)c.text(function(a){return J(a,b.format)});else for(var e in d)c.append("tspan").text(function(){return J(d[e],b.format)}).attr("x",b.x||0).attr("dy",1*e+"em")}).style(D(b.font)).style(y(b.border)).style(E(b.color)).call(function(a,b){var c=a.bbox().height,d=b.verticalAlign&&"top"!==b.verticalAlign?"center"===b.verticalAlign?c/2:0:c;if("function"==typeof b.y){var e=b.y;b.y=function(){return e.apply(this,arguments)+d}}else b.y=(b.y||0)+d;a.call(v,b)},b).style("text-anchor",K(b.align)).call(q,b.rotate))}}),db=o("Label",null,cb,{_fRender:function(a){var b=this.options,c=null,d=x(b.border),f=this.fClassNames(),g=a.selectAll(t(f)).data(s(b.data));return b.enabled===!1?void g.remove():(b.margin=G(b.margin),b.padding=H(b.padding),g.exit().remove(),g.enter().append("g").attr("class",f),void g.call(r,b.x||0,b.y||0,this.context).each(function(){var a=d3.select(this),f=a.append("rect").attr("class","outline").attr({x:0,y:0});e(b.border)&&e(b.background)||(c=a.append("rect").attr("class","border background").style(y(b.border)).style(E(b.background)));var g=a.append("text").attr("class","text").each(function(a){var c=d3.select(this);if("string"==typeof a){var d=a.split("\n");if(d.length<=1)c.text(function(a){return J(a,b.format)});else for(var e in d)c.append("tspan").text(function(){return J(d[e],b.format)}).attr("x",b.x||0).attr("dy",1*e+"em")}else c.text(function(a){return J(a,b.format)})}).style(D(b.font)).style(y(b.fontBorder)).style(E(b.fontColor)),h=f.bbox(),i=c?c.bbox():I(),j=g.bbox();i.x=b.margin.left,i.y=b.margin.top,j.x=i.x+d+b.padding.left,j.y=i.y+d+b.padding.top,i.width=2*(j.x-i.x)+j.width,i.height=2*(j.y-i.y)+j.height,h.width=b.margin.left+i.width+b.margin.right,h.height=b.margin.top+i.height+b.margin.bottom,f.attr({x:h.x,y:h.y,width:h.width,height:h.height}),c&&c.attr({x:i.x,y:i.y,width:i.width,height:i.height}),g.attr({x:j.x,y:j.y+j.height/(g.selectAll("tspan").size()||1)}),g.selectAll("tspan").attr("x",g.attr("x"));var k="right"===b.align?-h.width:"center"===b.align?-h.width/2:0,l="bottom"===b.verticalAlign?-h.height:"center"===b.verticalAlign?-h.height/2:0,m=r(a);a.call(r,m[0].x+k,m[0].y+l,this.context).call(q,b.rotate)}))}}),ib=10,jb=3,kb=5,lb=3,mb=3,eb=o("Axis",null,cb,{_fRender:function(a){var b=this.context,c=this.options,d=c.line,e=c.tick,f=e.major,g=e.minor,h=e.label,i=L(c.type),l=(d3.svg.axis(),this.fClassNames()),m=a.selectAll(t(l)).data([c.domain]),n=j(c.width||a.attr("width"),!0),o=j(c.height||a.attr("height"),!0);if(c.enabled===!1)return void m.remove();if(f.tickNumbers=f.tickNumbers||ib,g.numbers=g.numbers||jb,f.size=f.size||kb,g.size=g.size||lb,h.gap=h.gap||mb,P(e,c.location),m.exit().remove(),m.enter().append("g").attr("class",l).call(r,c.x||0,c.y||0,this.context),c.background||c.border){var p=m.selectAll(".border.background").data([0]);p.enter().append("rect").attr("class","border background"),d3.transition(p).style(y(c.border)).style(F(c.background)).attr({x:0,y:0,width:n,height:o})}i.domain(c.domain),"x"===c.orient?i.range(c.reversed?[n,0]:[0,n]):"y"===c.orient&&i.range(c.reversed?[0,o]:[o,0]);var q=this.__scale__||i,s=this.__scale__=i.copy(),v=s.ticks?s.ticks.apply(s,[f.tickNumbers]):s.domain(),w=m.selectAll(".major.tick").data(v,s),x=d3.transition(w.exit()).style("opacity",1e-6).remove(),z=w.enter().insert("g",".axis.line").attr("class","major tick").style(u(f.style)).style("opacity",1e-6),A=String;if(w=d3.transition(w).style("opacity",1),A="function"==typeof h.format?h.format:s.tickFormat?s.tickFormat.apply(s,[f.tickNumbers],h.format):h.format||String,h.format=A,g&&g.enabled!==!1){var B=X(s,v,g.numbers),C=m.selectAll("minor tick").data(B,String),D=d3.transition(C.exit()).style("stroke-opacity",1e-6).remove(),E=C.enter().insert("line",".tick").attr("class","minor tick line").style(u(g.style)),G=!0;C=d3.transition(C).style(u(g.style))}var H=N(s),I=m.selectAll(".axis.line").data([c.orient]),J=I.enter().append("path").attr("class","axis line").style("fill","none");I=d3.transition(I),f&&f.enabled!==!1&&z.append("line").attr("class","major tick line").style("fill","none"),h.id="major tick label",h.align=h.align||"center";var K=null,M=this;w.each(function(a){var c=k(h);c.data=[a],K=new db(b,M,c),K.fRender(d3.select(this))});var Q=w.selectAll(".major.tick.line"),R=z.selectAll("g.major.tick.label"),S=O(f,f.size,c.location),Y=O(g,g.size,c.location),Z=(R.bbox(),U(c.location,H)),$=null;"top"===c.location||"bottom"===c.location?($=V,Q.attr("x1",0).attr("x2",0).attr("y1",S[0]).attr("y2",S[1]),G&&(E.attr("y1",Y[0]).attr("y2",Y[1]),C.attr("x2",0).attr("y1",Y[0]).attr("y2",Y[1]))):("left"===c.location||"right"===c.location)&&($=W,Q.attr("x1",S[0]).attr("x2",S[1]).attr("y2",0),G&&(E.attr("x1",Y[0]).attr("x2",Y[1]),C.attr("x1",Y[0]).attr("x2",Y[1]).attr("y2",0)));var _=r(R),ab=T(e,R.bbox(),c.location);if(R.call(r,function(a,b,c){return _[c].x+ab.dx},ab.dy,b),J.attr("d",Z).style(u(d.style)),I.attr("d",Z).style(u(d.style)),s.rangeBand){var bb=s.rangeBand()/2,cb=function(a){return s(a)+bb};z.call($,cb),w.call($,cb)}else z.call($,q),w.call($,s),x.call($,s),G&&(E.call($,q),C.call($,s),D.call($,s));p.call(r,m.bbox(!0).x,m.bbox(!1).y,b)},fDomain:function(){return arguments.length?(this.options.domain=arguments[0],this):this.options.domain},fGetLineXY:function(){}}),nb=nb||{};nb.Global=bb,nb.Context=fb,nb.Text=hb,nb.Label=db,nb.Axis=eb;var ob=ob||{};nb.util=ob,ob.DPI=Y,ob.getDPI=h,ob.uniqueId=A,ob.clone=k,ob.copy=l,ob.merge=m,ob.isFunction=c,ob.isNumber=a,ob.isObject=d,ob.isString=b,ob.emptyObject=e,ob.toRadian=f,ob.toDegree=g,ob.toArray=s,ob.rotateNode=p,ob.adaptSize=i,window.birtchart=window.birtchart||nb}();