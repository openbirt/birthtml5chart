/*! birthtml5chart 20-09-2014 */
!function(){function a(a){return"number"==typeof a}function b(a){return"stirng"==typeof a}function c(a){return"funciton"==typeof a}function d(a){return"object"==typeof a}function e(a){if(!a)return!0;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function f(a){return a*Math.PI/180}function g(a){return 180*a/Math.PI}function h(){var a=document.createElement("div");a.setAttribute("id","testdiv"),a.style.height="1in",a.style.left="-100%",a.style.position="absolute",a.style.top="-100%",a.style.width="1in";var b=document.getElementsByTagName("body")[0];b.appendChild(a);var c=document.getElementById("testdiv").offsetWidth;return b.removeChild(a),c}function i(a,b,c){if(!b)return a;var d,e,f,g=W?W:W=h(),i=null;return"number"==typeof a?(d=a,f="px"):(d=parseFloat(a),f=a.indexOf("pt")>0?"pt":a.indexOf("in")>0?"in":a.indexOf("mm")>0?"mm":a.indexOf("cm")>0?"cm":"px"),e=d,"pt"===f?e=g*d/72:"in"===f?e=d*g:"mm"===f?e=g*d/25.4:"cm"===f&&(e=g*d/2.54),"pt"===b?(e=72*e/g,i="pt"):"in"===b?(e/=g,i="in"):"mm"===b?(e=25.4*e/g,i="mm"):"cm"===b?(e=2.54*e/g,i="cm"):"px"===b&&(e=e,i="px"),c===!0?e:e+i}function j(a,b){return i(a,"px",b)}function k(a){if(null===a||"object"!=typeof a)return a;var b=new a.constructor;for(var c in a)a.hasOwnProperty(c)&&(b[c]=k(a[c]));return b}function l(a){if(null===a||"object"!=typeof a)return a;var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=l(a[c]));return b}function m(a,b){if(!b)return a;if(!a)return k(b);for(var c in b)b.hasOwnProperty(c)&&(a[c]=null===b[c]||"object"!=typeof b[c]?b[c]:m(a[c],b[c]));return a}function n(a,b){var c=null;a||(a={});for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function o(a,b,c,d){function e(){return this.fInit&&this.fInit.apply(this,arguments),this}var f=b?b:e;return f.prototype=c?new c:{},n(f.prototype,d),f.prototype.__super=c?c.prototype:null,f.prototype.__className=a,f}function p(a,b,c){var d=b,e=c,f=!0;"object"!=typeof b||e||(d=b.degree,e=b.mode,f=b.enabled!==!1);var g,h,i,j,k,l;return f&&"number"==typeof d&&(g=a.getBBox(),"auto"===e?k="":(h="start"===e?g.x:"end"===e?g.x+g.width:g.x+g.width/2,i=g.y+g.height/2,k=" "+h+" "+i),l="rotate("+d+k+")",j=a.getAttribute("transform"),j?j.match(X)?j=j.replace(X,l):j+=" "+l:j=l,a.setAttribute("transform",j)),a}function q(a,b,c){var d=b,e=c,f=!0;return"object"!=typeof b||e||(d=b.degree,e=b.mode,f=b.enabled!==!1),a.attr("transform",function(){var a,b,c,g,h,i=null;return f&&"number"==typeof d&&(a=this.getBBox(),"auto"===e?g="":(b="start"===e?a.x:"end"===e?a.x+a.width:a.x+a.width/2,c=a.y+a.height/2,g=" "+b+","+c),h="rotate("+d+g+")",i=this.getAttribute("transform"),i?i.match(X)?i=i.replace(X,h):i+=" "+h:i=h),i})}function r(a,b,c,d){function e(a,b,c){return"function"==typeof a?a(b,c,d):a}if(1===arguments.length){var f=[];return a.each(function(){var a,b,c=this.getAttribute("transform");c&&c.indexOf("translate")>=0&&(c=c.match(Y),c&&c.length&&(c=c[0].match(/([0-9\.\-]+)/g),c&&c.length&&(a=parseFloat(c[0]),b=c[1]?parseFloat(c[1]):0,f.push({x:a,y:b}))))}),f}return a.attr("transform",function(a,d){var f="translate("+e(b,a,d)+","+e(c,a,d)+")",g=this.getAttribute("transform");return g?g.match(Y)?g=g.replace(Y,f):g+=" "+f:g=f,g})}function s(a){return a instanceof Array?a:[a]}function t(a){return"."+a.replace(" ",".")}function u(a){if("function"==typeof a)return a;if("object"==typeof a){for(var b in a)if(a.hasOwnProperty(b)){var c=u(b);c!==b&&(a[c]=a[b],a[b]=null,delete a[b])}return a}return a?a.replace(/([A-Z])/g,function(a,b){return"-"+b.toLowerCase()}):{}}function v(a,b){b.x&&a.attr("x",b.x),b.y&&a.attr("y",b.y),b.dx&&a.attr("dx",b.dx),b.dy&&a.attr("dy",b.dy),b.width&&a.attr("width",b.width),b.heigth&&a.attr("height",b.height)}function w(a,b){var c,d=typeof b;return"string"===d||"function"===d?(c={},c[a]=b,c):"object"===d?u(b):{}}function x(a){return a?a.strokeWidth||a["stroke-width"]||a.width||0:0}function y(a,b){if("object"==typeof a)for(var c in a)a.hasOwnProperty(c)&&("roundCorner"===c?(a.rx=a.rx||a.roundCorner,a.ry=a.ry||a.roundCorner):"dashStyle"===c?a[c]=C.call(this,c,a[c],x(a),b):("stroke"===c||"fill"===c)&&(a[c]=z.call(this,a[c],b)));return w.call(this,"border",a)}function z(a,b){var c=null,d=null,e=null,f=null,g=0;if("function"==typeof a)return function(c){var d=b?d3.merge(arguments,[b]):arguments;return a.apply(c,d)};if("object"!=typeof a)return a;if("image"===a.type)return c=this.getBBox(),d=this.d3Sel.append("image").datum(a),d.attr({x:0,y:0,width:c.width,height:c.height,"xlink:href":a.parameters&&a.parameters[0]}),a.indexOf("url")>=0?a:"#url("+a+")";if("linearGradient"===a.type||"radialGradient"===a.type){var h=b.fDefs();for(e=A(a.type),f=h.append(a.type).attr("id",e).attr(B(a)),g=0;g<a.stops.length;g++)f.append("stop").attr(u({offset:a.stops[g].offset||"0%",stopColor:a.stops[g].stopColor||this.options&&this.options.fill||"white",stopOpacity:a.stops[g].stopOpacity||1}));return"url(#"+e+")"}}function A(a){return GLOBAL.prefix+"-"+(a?a+"-":"")+$++ +"-"+Math.random().toString(2).slice(2)}function B(a){var b=a.parameters,c=null;return"linearGradient"===a.type?(b=b||["0%","0%","100%","100%"],"string"==typeof b&&(c=b.split(","),b=[],b[0]=Z[c[0]][0],b[1]=Z[c[0]][1],b[2]=Z[c[1]][0],b[3]=Z[c[1]][1]),{x1:b[0],y1:b[1],x2:b[2],y2:b[3]}):"radialGradient"===a.type?{cx:b[0],cy:b[1],r:b[2],fx:b[3],fy:b[4]}:void 0}function C(a,b,c){var d,e=a;if("function"==typeof e)return function(){var a=c?d3.merge(arguments,[c]):arguments;return e.apply(this,a)};if(e=e&&e.toLowerCase(),"solid"===e)e="none";else if(e){for(e=e.replace(/(shortdashdotdot)/g,"3,1,1,1,1,1,").replace(/(shortdashdot)/g,"3,1,1,1").replace(/(shortdot)/g,"1,1,").replace(/(shortdash)/g,"3,1,").replace(/(longdash)/g,"8,3,").replace(/(dot)/g,"1,3,").replace(/(dash)/g,"4,3,").replace(/,$/,"").split(","),d=e.length;d--;)e[d]=parseInt(e[d])*b;e=e.join(",")}return e}function D(a,b){if("object"==typeof a)for(var c in a)a.hasOwnProperty(c)&&("stroke"===c||"fill"===c)&&(a[c]=z.call(this,a[c],b),a[c+"Opacity"]=void 0===a[c+"Opacity"]?1:a[c+"Opacity"]);return w.call(this,"font",a)}function E(a){return w.call(this,"fill",a)}function F(a){return w.call(this,"fill",a)}function G(a){if("string"==typeof a){var b=a.split(/ /g);switch(b.length){case 1:return{top:j(b[0],!0),right:j(b[0],!0),bottom:j(b[0],!0),left:j(b[0],!0)};case 2:return{top:j(b[0],!0),right:j(b[1],!0),bottom:j(b[0],!0),left:j(b[1],!0)};case 3:return{top:j(b[0],!0),right:j(b[1],!0),bottom:j(b[2],!0),left:j(b[1],!0)};case 4:return{top:j(b[0],!0),right:j(b[1],!0),bottom:j(b[2],!0),left:j(b[3],!0)}}return{top:0,right:0,bottom:0,left:0}}var c=m({top:0,right:0,bottom:0,left:0},a);return c}function H(a){return G(a)}function I(){return{x:0,y:0,width:0,height:0}}function J(a,b){var c=typeof b;return b?"function"===c?b.call(this,a):"string"===c?d3.format(b).call(this,a):void 0:a}function K(a){return"center"===a?"middle":"right"===a?"end":"start"}function L(a){return d3.scale[a]&&"function"==typeof d3.scale[a]?d3.scale[a]():d3.scale.ordinal()}function M(a){var b=a[0],c=a[a.length-1];return c>b?[b,c]:[c,b]}function N(a){return a.rangeExtent?a.rangeExtent():M(a.range())}function O(a,b,c){return"top"===c||"bottom"===c?["cross"===a.mode?-b:0,"above"===a.mode?-b:a.mode||"top"!==c?b:-b]:["cross"===a.mode?-b:0,"left"===a.mode?-b:a.mode||"left"!==c?b:-b]}function P(a,b){a.label&&(a.label.mode=Q(b,a.label.mode)),a.major.mode=Q(b,a.major.mode),a.minor&&(a.minor.mode=Q(b,a.minor.mode))}function Q(a,b){return"corss"===b?b:"top"===a?"left"===b?"below":"right"===b?"top":b:"bottom"===a?"right"===b?"above":"left"===b?"below":b:"left"===a?"above"===b?"right":"below"===b?"left":b:"right"===a?"below"===b?"left":"above"===b?"right":b:b}function R(a,b,c,d,e){var f=Q(b,c);return"same"===a.mode?a.mode=f:"opposite"===a.mode&&(a.mode="cross"===f?"top"===b?"below":"bottom"===b?"above":"left"===b?"right":"left":"below"===f?"above":"above"===f?"below":"left"===f?"right":"left"),"cross"===a.mode&&(a.mode="top"===b?"above":"bottom"===b?"below":"left"===b?"left":"right"),"bottom"===b||"top"===b?"above"===a.mode?[("below"!==f?-Math.max(d,0):0)-e,"0em"]:[("above"!==f?Math.max(d,0):0)+e,".8em"]:"left"===b||"right"===b?"left"===a.mode?[("right"!==f?-Math.max(d,0):0)-e,".32em"]:[("left"!==f?Math.max(d,0):0)+e,".32em"]:void 0}function S(a,b){return"top"===a||"bottom"===a?"M"+b[0]+",0 H"+b[1]:"left"===a||"right"===a?"M"+b[0]+",0 V"+b[1]:void 0}function T(a,b){a.attr("transform",function(a){return"translate("+b(a)+",0)"})}function U(a,b){a.attr("transform",function(a){return"translate(0,"+b(a)+")"})}function V(a,b,c){var d=[];if(c&&b.length>1){for(var e,f,g=M(a.domain()),h=-1,i=b.length,j=(b[1]-b[0])/++c;++h<i;)for(e=c;--e>0;)(f=+b[h]-e*j)>=g[0]&&d.push(f);for(--h,e=0;++e<c&&(f=+b[h]+e*j)<g[1];)d.push(f)}return d}d3.selection.prototype.bbox=function(a){if(!a&&this._bbox)return this._bbox;this._bbox={x:0,y:0,width:0,height:0};for(var b=0,c=this.length;c>b;b++)for(var d=this[b],e=0,f=d.length;f>e;e++){var g=d[e];if(g&&("g"===g.nodeName||"text"===g.nodeName)){var h=g._bbox;(!h||a)&&(h=h||g.getBBox()),this._bbox.x=h.x<this._bbox.x?h.x:this._bbox.x,this._bbox.y=h.y<this._bbox.y?h.y:this._bbox.y,this._bbox.width=h.x+h.width>this._bbox.x+this._bbox.width?h.width:this._bbox.width,this._bbox.height=h.y+h.height>this._bbox.y+this._bbox.height?h.height:this._bbox.height}}return this._bbox},d3.transition.prototype.bbox=d3.selection.prototype.bbox,d3.selection.prototype.opts=function(){return arguments.length?this.property("__opts__",value):this.property("__opts__")};var W,X=/rotate\(.*?\)/g,Y=/translate\(.*?\)/g,Z={L:["0%","50%"],R:["100%","50%"],T:["50%","0%"],B:["50%","100%"],LT:["0%","0%"],TL:["0%","0%"],LB:["0%","100%"],BL:["0%","100%"],RT:["100%","0%"],TR:["100%","0%"],RB:["100%","100%"],BR:["100%","100%"]},$=0,_={lazyRender:!0,prefix:"d3charts"},ab=function(){},bb=function(){},cb=function(){},db=o("Context",null,Object,{prefix:null,lazyRender:null,svgNode:null,fInit:function(a){this.prefix=_.prefix,this.lazyRender=_.lazyRender,this.svgNode=a},fSvgSel:function(){return arguments.length?(this.svgSel=arugments[0],this):this.svgSel},fDefs:function(){return arguments.length?(this.defs=arguments[0],this):this.defs?this.defs:this.defs=this.svgSel.append("defs")}}),eb=o("RenderCallback",null,null,{fBeforeRendering:function(){},fAfterRendering:function(){}}),ab=o("Element",null,eb,{__className:null,__super:null,context:null,parent:null,options:null,d3Sel:null,isRendered:!1,fInit:function(a,b,c){this.context=a,this.parent=b,this.options=c||{}},fOptions:function(){return arguments.length?(this.options=arguments[0],this.fApplyChange(this.fOptions)):this.options},fApplyChange:function(){return this.context.lazyRender||this.fRedraw(),this},fRender:function(a){return this.d3Sel=a,this.fBeforeRendering.apply(this,arguments),this._fRender.apply(this,arguments),this.isRendered=!0,this.fAfterRendering.apply(this,arguments),this},_fRender:function(){return this},fRedraw:function(){return this.d3Sel&&this.fDestory()&&this.fRender(this.d3Sel),this},fAttr:function(){var a=null;if(this.d3Sel)if(1===arguments.length){if(a=typeof arguments[0],"string"===a)return this.d3Sel.attr(arguments[0]);"object"===a&&this.d3Sel.attr.apply(this,arguments)}else arguments.length&&this.d3Sel.attr.apply(this,arguments);return this},fClassNames:function(){return this.options.id?this.options.id+" "+this.__className:this.__className},fBBox:function(){return this.d3Sel?l(this.d3Sel.bbox()):{}},fDestory:function(){return this.d3Sel?(this.d3Sel.selectAll("*").remove(),this.isRendered=!1,!0):!1}}),fb=o("Text",null,ab,{_fRender:function(a){var b=this.options,c=this.fClassNames(),d=a.selectAll(t(c)).data(s(b.data));return b.enabled===!1?void d.remove():(d.exit().remove(),d.enter().append("text").attr("class",c),void d.each(function(a){var c=d3.select(this),d=a.split("\n");if(d.length<=1)c.text(function(a){return J(a,b.format)});else for(var e in d)c.append("tspan").text(function(){return J(d[e],b.format)}).attr("x",b.x||0).attr("dy",1*e+"em")}).style(D(b.font)).style(y(b.border)).style(E(b.color)).call(function(a,b){var c=a.bbox().height,d=b.verticalAlign&&"top"!==b.verticalAlign?"center"===b.verticalAlign?c/2:0:c;if("function"==typeof b.y){var e=b.y;b.y=function(){return e.apply(this,arguments)+d}}else b.y=(b.y||0)+d;a.call(v,b)},b).style("text-anchor",K(b.align)).call(q,b.rotate))}}),bb=o("Label",null,ab,{_fRender:function(a){var b=this.options,c=null,d=x(b.border),f=this.fClassNames(),g=a.selectAll(t(f)).data(s(b.data));return b.enabled===!1?void g.remove():(b.margin=G(b.margin),b.padding=H(b.padding),g.exit().remove(),g.enter().append("g").attr("class",f),void g.call(r,b.x||0,b.y||0,this.context).each(function(){var a=d3.select(this),f=a.append("rect").attr("class","outline").attr({x:0,y:0});e(b.border)&&e(b.background)||(c=a.append("rect").attr("class","border background").style(y(b.border)).style(E(b.background))),textSel=a.append("text").attr("class","text").each(function(a){var c=d3.select(this);if("string"==typeof a){var d=a.split("\n");if(d.length<=1)c.text(function(a){return J(a,b.format)});else for(var e in d)c.append("tspan").text(function(){return J(d[e],b.format)}).attr("x",b.x||0).attr("dy",1*e+"em")}else c.text(function(a){return J(a,b.format)})}).style(D(b.font)).style(y(b.fontBorder)).style(E(b.fontColor));var g=f.bbox(),h=c?c.bbox():I(),i=textSel.bbox();h.x=b.margin.left,h.y=b.margin.top,i.x=h.x+d+b.padding.left,i.y=h.y+d+b.padding.top,h.width=2*(i.x-h.x)+i.width,h.height=2*(i.y-h.y)+i.height,g.width=b.margin.left+h.width+b.margin.right,g.height=b.margin.top+h.height+b.margin.bottom,f.attr({x:g.x,y:g.y,width:g.width,height:g.height}),c&&c.attr({x:h.x,y:h.y,width:h.width,height:h.height}),textSel.attr({x:i.x,y:i.y+i.height/(textSel.selectAll("tspan").size()||1)}),textSel.selectAll("tspan").attr("x",textSel.attr("x"));var j="right"===b.align?-g.width:"center"===b.align?-g.width/2:0,k="bottom"===b.verticalAlign?-g.height:"center"===b.verticalAlign?-g.height/2:0,l=r(a);a.call(r,l[0].x+j,l[0].y+k,this.context).call(q,b.rotate)}))}}),gb=10,hb=3,ib=5,jb=3,kb=3,cb=o("Axis",null,ab,{_fRender:function(a){var b=this.context,c=this.options,d=c.line,e=c.tick,f=e.major,g=e.minor,h=e.label,i=L(c.mode),l=(d3.svg.axis(),this.fClassNames()),m=a.selectAll(t(l)).data([c.domain]),n=j(c.width||a.attr("width"),!0),o=j(c.height||a.attr("height"),!0);if(c.enabled===!1)return void labelUpdate.remove();if(m.exit().remove(),m.enter().append("g").attr("class",l).call(r,c.x||0,c.y||0,this.context),c.background||c.border){var p=m.selectAll(".border.background").data([0]);p.enter().append("rect").attr("class","border background"),d3.transition(p).style(y(c.border)).style(F(c.background)).attr({x:0,y:0,width:n,height:o})}i.domain(c.domain),"x"===c.orient?i.range(c.reversed?[n,0]:[0,n]):"y"===c.orient&&i.range(c.reversed?[0,height]:[height,0]);var q=this.__scale__||i,s=this.__scale__=i.copy(),v=f.tickNumbers||gb,w=s.ticks?s.ticks.apply(s,[v]):s.domain(),x=m.selectAll(".major.tick").data(w,s),z=d3.transition(x.exit()).style("opaity",1e-6).remove(),A=x.enter().insert("g",".axis.line").attr("class","major tick").style(u(f.style)).style("opacity",1e-6);if(x=d3.transition(x).style("opacity",1),labelFormat="function"==typeof h.format?h.format:s.tickFormat?s.tickFormat.apply(s,[v],h.format):h.format||String,h.format=labelFormat,g&&g.enabled!==!1){var B=g.tickNumber||hb,C=V(s,w,B),D=m.selectAll("minor tick").data(C,String),E=d3.transition(D.exit()).style("stroke-opacity",1e-6).remove(),G=D.enter().insert("line",".tick").attr("class","minor tick line").style(u(g.style)),H=!0;D=d3.transition(D).style(u(g.style))}var I=N(s),J=m.selectAll(".axis.line").data([c.orient]),K=J.enter().append("path").attr("class","axis line").style("fill","none");J=d3.transition(J),A.append("line").attr("class","major tick line").style("fill","none"),h.id="major tick label",h.align=h.align||"center";var M=null,Q=this;x.each(function(a){var c=k(h);c.data=[a],M=new bb(b,Q,c),M.fRender(d3.select(this))});{var W=x.selectAll(".major.tick.line");A.selectAll("g.major.tick.label")}P(e,c.orient);var X=f.size||ib,Y=g.size||jb,Z=h.tickPadding||kb,$=O(f,X,c.location),_=O(g,Y,c.location),ab=(R(h,c.location,f.mode,X,Z),S(c.location,I)),cb=null;if("top"===c.location||"bottom"===c.location?(cb=T,W.attr("x1",0).attr("x2",0).attr("y1",$[0]).attr("y2",$[1]),H&&(G.attr("y1",_[0]).attr("y2",_[1]),D.attr("x2",0).attr("y1",_[0]).attr("y2",_[1]))):("left"===c.location||"right"===c.location)&&(cb=U,W.attr("x1",$[0]).attr("x2",$[1]).attr("y2",0),H&&(G.attr("x1",_[0]).attr("x2",_[1]),D.attr("x1",_[0]).attr("x2",_[1]).attr("y2",0))),K.attr("d",ab).style(u(d.style)),J.attr("d",ab).style(u(d.style)),s.rangeBand){var db=s.rangeBand()/2,eb=function(a){return s(a)+db};A.call(cb,eb),x.call(cb,eb)}else A.call(cb,q),x.call(cb,s),z.call(cb,s),H&&(G.call(cb,q),D.call(cb,s),E.call(cb,s))},fDomain:function(){return arguments.length?(this.options.domain=arguments[0],this):this.options.domain},fGetLineXY:function(){}}),lb=lb||{};lb.Global=_,lb.Context=db,lb.Text=fb,lb.Label=bb,lb.Axis=cb;var mb=mb||{};lb.util=mb,mb.DPI=W,mb.getDPI=h,mb.uniqueId=A,mb.clone=k,mb.copy=l,mb.merge=m,mb.isFunction=c,mb.isNumber=a,mb.isObject=d,mb.isString=b,mb.emptyObject=e,mb.toRadian=f,mb.toDegree=g,mb.toArray=s,mb.rotateNode=p,mb.adaptSize=i,window.birtchart=window.birtchart||lb}();